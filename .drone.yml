---
kind: pipeline
type: docker
name: Linters

trigger:
  branch:
    - main

steps:
  - name: yamllint
    image: python:alpine
    commands:
      - pip3 install --quiet yamllint
      - yamllint  --config-file .yamllint.config --strict .*.yml

  - name: markdownlint
    image: ruby:alpine
    commands:
      - gem install mdl
      - mdl README.md

  - name: hadolint
    image: hadolint/hadolint:latest-debian
    commands:
      - hadolint --version
      - hadolint  Dockerfile

  - name: backup-bootstrap
    image: alpine:latest
    commands:
      - /bin/bash backups/backup-bootstrap.sh
